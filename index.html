<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Crafting Anzeige</title>
  <style>
    body { font-family: Arial; margin: 2rem; }
    select, pre { font-size: 1rem; padding: 0.5rem; width: 300px; }
    pre { background: #f0f0f0; padding: 1rem; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Crafting-System</h1>
  <select id="itemSelect" onchange="zeigeRezept()">
    <option value="">-- Item auswählen --</option>
  </select>
  <pre id="ausgabe"></pre>

  <script>
    // 1. Interne Crafting-Daten
    const rezepte = {
      "craft_1": {
        itemsRequired: [
          ["craft_blanko", 1],
          ["schem_1", 1],
          ["craft_karrosserie", 4],
          ["craft_motor", 2],
          ["craft_reifen", 4],
          ["craft_getriebe", 6],
          ["craft_batterie", 1],
          ["craft_elektrik", 2],
          ["stoff", 50],
          ["schwer_stoff", 25]
        ]
      },
      "craft_elektrik": {
        itemsRequired: [
          ["kupfer", 10],
          ["isolierung", 5]
        ]
      }
    };

    // 2. Mapping interner Namen → Anzeigenamen
    const anzeigeNamen = {
      "craft_1": "Auto",
      "craft_blanko": "Fahrzeugrahmen",
      "schem_1": "Bauplan Auto",
      "craft_karrosserie": "Karosserie",
      "craft_motor": "Motor",
      "craft_reifen": "Reifen",
      "craft_getriebe": "Getriebe",
      "craft_batterie": "Batterie",
      "craft_elektrik": "Elektrik",
      "stoff": "Einfacher Stoff",
      "schwer_stoff": "Schwerer Stoff",
      "kupfer": "Kupfer",
      "isolierung": "Isolierung"
    };

    const select = document.getElementById("itemSelect");
    const ausgabe = document.getElementById("ausgabe");

    // 3. Dropdown befüllen
    for (let key in rezepte) {
      const opt = document.createElement("option");
      opt.value = key;
      opt.textContent = anzeigeNamen[key] || key;
      select.appendChild(opt);
    }

    // 4. Rekursive Anzeige
    function zeigeRezept() {
      const key = select.value;
      if (!key) return ausgabe.textContent = "";

      ausgabe.textContent = verarbeiteRezept(key);
    }

    function verarbeiteRezept(item, ebene = 0) {
      const einzug = " ".repeat(ebene * 2);
      let ausgabe = `${einzug}${anzeigeNamen[item] || item}\n`;

      const daten = rezepte[item];
      if (!daten || !daten.itemsRequired) return ausgabe;

      for (const [subItem, menge] of daten.itemsRequired) {
        ausgabe += `${einzug}  ⤷ ${menge}x ${anzeigeNamen[subItem] || subItem}\n`;
        if (rezepte[subItem]) {
          ausgabe += verarbeiteRezept(subItem, ebene + 2);
        }
      }

      return ausgabe;
    }
  </script>
</body>
</html>
